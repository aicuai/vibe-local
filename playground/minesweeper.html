<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><title> Minesweeper </title><style>body{font-family:'Meiryo',sans-serif;text-align:center;margin:20px;}#game{display:grid;grid-template-columns:repeat(9,40px);grid-gap:5px;margin:0 auto;}cell{width:40px;height:40px;font-size:20px;line-height:40px;border:2px solid #333;box-shadow:2px 2px 5px #888;position:relative;cursor:pointer;}cell.revealed{background:#f0f0f0;box-shadow:0 0 5px #aaa;}cell.flagged{background:#ffd700;box-shadow:0 0 5px #ffcc00;cursor:default;}#status{margin:10px 0;}</style></head><body><div id="status"><div>地雷数: <span id="mineCount">10</span></div><div>所要時間: <span id="timer">0</span>s</div></div><div id="game"></div><script>let mines=10,board=[],revealed=0,gameOver=false;function createBoard(){let game=document.getElementById('game');game.innerHTML='';let cells=[];for(let y=0;y<9;y++){for(let x=0;x<9;x++){let cell=document.createElement('div');cell.className='cell';cell.dataset.x=x;cell.dataset.y=y;cell.addEventListener('contextmenu',e=>{e.preventDefault();toggleFlag(cell);});cell.addEventListener('click',()=>$revealCell(cell);});cells.push(cell);}}game.append(...cells);placeMines();}function placeMines(){let minePositions=new Set();while(mines>0){let x=Math.floor(Math.random()*9),y=Math.floor(Math.random()*9);if(!minePositions.has(`${x},${y}`)){minePositions.add(`${x},${y}`);board.push({x,y,mine:true});mines--;}}board=board.concat(Array(81-mines).fill({mine:false}));}function toggleFlag(cell){if(gameOver)return;if(cell.classList.contains('flagged')){cell.classList.remove('flagged');document.getElementById('mineCount').textContent=parseInt(document.getElementById('mineCount').textContent)+1;}else{cell.classList.add('flagged');document.getElementById('mineCount').textContent=parseInt(document.getElementById('mineCount').textContent)-1;}}function revealCell(cell){if(gameOver)return;if(cell.classList.contains('flagged'))return;if(board.find(b=>b.x==cell.dataset.x && b.y==cell.dataset.y).mine){gameOver=true;cell.style.backgroundColor='red';document.getElementById('status').innerHTML+='<div>ゲームオーバー</div>';return;}revealed++;cell.classList.add('revealed');let count=0;for(let dy=-1;dy<=1;dy++)for(let dx=-1;dx<=1;dx++)if(board.find(b=>b.x==cell.dataset.x+dx && b.y==cell.dataset.y+dy).mine)count++;if(count>0){cell.textContent=count;}if(revealed==81-mines){document.getElementById('status').innerHTML+='<div>クリア！</div>';}}setInterval(()=>{if(!gameOver)document.getElementById('timer').textContent=parseInt(document.getElementById('timer').textContent)+1;},1000);createBoard();</script></body></html>