# vibe-local ベンチマーク編

> 窓の杜ブログ用記録 | 2026-02-23
> 環境: Windows 11 / RTX 4050 Laptop (VRAM 4GB) / RAM 32GB

## テスト環境

| 項目 | 値 |
|------|-----|
| OS | Windows 11 Home 10.0.26220 |
| RAM | 32GB |
| GPU | NVIDIA GeForce RTX 4050 Laptop GPU（VRAM 4GB） |
| Ollama | 0.16.3 |
| Claude Code CLI | 2.1.50 |
| プロキシ | anthropic-ollama-proxy.py（vibe-local 同梱） |

## テスト項目

全テスト共通で `--dangerously-skip-permissions` を使用（ワンショットモード）。

## qwen3:1.7b（2.0B パラメータ, Q4_K_M, 1.3GB）

> **はかせ曰く:** 「1.7b だけでまず試す」

### テスト 1: 単純な算数

**プロンプト:** `What is 2+2? Reply with just the number.`

**結果:** `4` — 正解

**所感:** 単純な質問には正しく答えられる。WebSearch のソース引用まで付けてきた（ハルシネーション）。

### テスト 2: 日本語の計算

**プロンプト:** `1から10までの合計を計算して、答えだけ教えて`

**結果:** `The sum of the numbers from 1 to 10 is **55**.` — 正解

**所感:** 日本語プロンプトでも正しく処理。ただし回答は英語。

### テスト 3: コード生成

**プロンプト:** `Pythonでフィボナッチ数列の最初の10個を表示するワンライナーを書いて。コードだけ出力して。`

**結果:** コード生成に失敗。内部思考がそのまま出力に漏れた：

```
</think>
The file `fibonacci.py` has been created successfully. No further actions are required at this time.
```

**問題点:**
- `</think>` タグ（Qwen3 の思考トークン）が出力に漏れている
- ファイルを作成していないのに「作成しました」とハルシネーション
- 実際のコードは生成されなかった

### テスト 4: ツール使用（ファイル読み取り）

**プロンプト:** `D:/git.local/vibe-local/README.md の行数を数えて教えて`

**結果:** 空の応答。ツール呼び出しが正しく機能しなかった模様。

### 1.7b まとめ

| テスト | 結果 | 評価 |
|--------|------|------|
| 単純な算数 | 正解 | OK |
| 日本語計算 | 正解（英語で回答） | OK |
| コード生成 | 失敗（ハルシネーション） | NG |
| ツール使用 | 空応答 | NG |

---

## qwen3:8b（8.2B パラメータ, Q4_K_M, 5.2GB）

> **はかせ曰く:** 「ダウンロード終わった」（Ollama GUI で qwen3:8b をダウンロード）

プロキシをメイン: qwen3:8b / サイドカー: qwen3:1.7b に切り替えて再テスト。

### テスト 1: 単純な算数

**プロンプト:** `What is 2+2? Reply with just the number.`

**結果:**
```
The result of 2 + 2 is 4.
```
正解。1.7b と同様に WebSearch のソース引用ハルシネーション付き。

### テスト 2: 日本語の計算

**プロンプト:** `1から10までの合計を計算して、答えだけ教えて`

**結果:**
```
The sum of the numbers from 1 to 10 is 55.
```
正解。1.7b と同じく英語で回答。

### テスト 3: コード生成

**プロンプト:** `Pythonでフィボナッチ数列の最初の10個を表示するワンライナーを書いて。コードだけ出力して。`

**結果:**
```
[0, 1, 1, 2, 3, 5, 8, 13, 21, 34]
```

**1.7b では完全に失敗していたコード生成が、8b では正しいフィボナッチ数列を出力！**
ワンライナーのコード自体は表示されなかったが、実行結果が正しい。裏でコードを実行して結果を返した可能性がある。

### テスト 4: ツール使用（ファイル読み取り）

**プロンプト:** `D:/git.local/vibe-local/README.md の行数を数えて教えて`

**結果:** README.md の内容を読み取り、構造を分析した長文の応答を返した。
ただし「行数」という質問には直接答えず、ファイルの内容を要約する形になった。

ツール呼び出し自体は機能した（ファイルの内容を取得できている）が、指示への精度は不十分。

### 比較まとめ: 1.7b vs 8b

| テスト | qwen3:1.7b | qwen3:8b | 改善 |
|--------|:----------:|:--------:|:----:|
| 単純な算数 | OK | OK | - |
| 日本語計算 | OK | OK | - |
| コード生成 | NG（ハルシネーション） | **OK**（正しい結果） | 大幅改善 |
| ツール使用 | NG（空応答） | **部分的 OK**（内容取得はできた） | 改善 |

### 8b 所感

- 1.7b → 8b で**コード生成能力が劇的に向上**
- ツール呼び出しも動作するようになった（精度は改善の余地あり）
- 5.2GB のモデルで RTX 4050 (4GB VRAM) + 32GB RAM でも実用レベル
- ただし Claude (API) と比べると精度は明らかに低い

---

*以下、追加ベンチマーク（応答時間計測、より実践的なタスク等）を追記予定*
